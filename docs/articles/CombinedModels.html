<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Combined Models • greed</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Combined Models">
<meta property="og:description" content="greed">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">greed</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a>
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GMM.html">Gaussian Mixture Models</a>
    </li>
    <li>
      <a href="../articles/LCA.html">Latent Class Analysis</a>
    </li>
    <li>
      <a href="../articles/MoR.html">Mixture of Regressions</a>
    </li>
    <li>
      <a href="../articles/SBM.html">Graph clustering</a>
    </li>
    <li>
      <a href="../articles/CombinedModels.html">Combined Models</a>
    </li>
    <li>
      <a href="../articles/MoM.html">Mixture of Multinomials</a>
    </li>
    <li>
      <a href="../articles/LBM.html">Co-clustering and LBM</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a>
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/comeetie/greed" class="external-link">github</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Combined Models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/comeetie/greed/blob/HEAD/vignettes/CombinedModels.Rmd" class="external-link"><code>vignettes/CombinedModels.Rmd</code></a></small>
      <div class="hidden name"><code>CombinedModels.Rmd</code></div>

    </div>

    
    
<style type="text/css">
p.caption {
  font-style: italic;
}
</style>
<p>Loads packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://comeetie.github.io/greed/" class="external-link">greed</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://torvaney.github.io/ggsoccer/" class="external-link">ggsoccer</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2134</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="mixed-type-data-clustering">Mixed-type data clustering<a class="anchor" aria-label="anchor" href="#mixed-type-data-clustering"></a>
</h2>
<p>One of distinctive feature of greed is that you may combine several model together. Using such an approach one may perform a clustering of several view of the same individuals with different generative models. In all case this approach suppose that the different views are generated in an independent way when the clustering assignment is known. To explore this capability we will begin with the Fifa dataset and cluster simultaneously the categorical features with an <code><a href="../reference/Lca.html">LcaPrior()</a></code> and the continuous one with a <code><a href="../reference/Gmm.html">GmmPrior()</a></code>.</p>
<div class="section level3">
<h3 id="lca-gmm-the-fifa-data-set">Lca + Gmm, the Fifa data-set<a class="anchor" aria-label="anchor" href="#lca-gmm-the-fifa-data-set"></a>
</h3>
<p>We first load the <code><a href="../reference/Fifa.html">?Fifa</a></code> dataset (several features of Soccer players in the Fifa 2020 videogame). We remove the first two columns that give the players names and nationality, and we kept only the players which earn more than 1000000 euros.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Fifa</span><span class="op">)</span>
<span class="va">X</span> <span class="op">&lt;-</span> <span class="va">Fifa</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">value_eur</span><span class="op">&gt;</span><span class="fl">1000000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">value_eur</span>,<span class="op">-</span><span class="va">GK</span>,<span class="op">-</span><span class="va">pos_x</span>,<span class="op">-</span><span class="va">pos_y</span><span class="op">)</span></code></pre></div>
<p>This leave us with a dataset of <span class="math inline">\(n=2266\)</span> rows and <span class="math inline">\(p=24\)</span> columns. The features correspond to players characteristics (age,height,weight), skills scores (pace,shooting,…) and a set of binary factors that describe the field positions were the players may be aligned.</p>
<p>Preparing the data and the model is a little bit more complicated than for the other models since we must specify the different models we want to use. The data are provided with a named list, and the model is created with the <code><a href="../reference/CombinedModels.html">?CombinedModels</a></code> constructor, which must also be provided with a list of model priors, with the same named slots as in the data list. The following piece of code demonstrate this approach and the Fifa dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span>
<span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>,workers<span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="co"># may be increased</span>
<span class="co"># prepare the dataset create a list with the factor columns in one slot </span>
<span class="co"># and the numeric columns in another slot</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>categorical <span class="op">=</span> <span class="va">X</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.factor</span><span class="op">)</span>,
            cont <span class="op">=</span> <span class="va">X</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">{</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">is.factor</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">}</span><span class="op">)</span><span class="op">)</span>
<span class="co"># create the CombinedModels, as expected we will use an LcaPrior for the factors </span>
<span class="co"># and a GmmPrior for the numeric columns.</span>
<span class="co"># Be careful names in the models list and in the data list must match !</span>
<span class="va">mixmod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CombinedModels.html">CombinedModels</a></span><span class="op">(</span>models<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>categorical<span class="op">=</span><span class="fu"><a href="../reference/Lca.html">LcaPrior</a></span><span class="op">(</span><span class="op">)</span>,cont<span class="op">=</span><span class="fu"><a href="../reference/Gmm.html">GmmPrior</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># perform the clustering</span>
<span class="va">sol</span> <span class="op">=</span> <span class="fu"><a href="../reference/greed.html">greed</a></span><span class="op">(</span><span class="va">data</span>,model <span class="op">=</span> <span class="va">mixmod</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Fitting a COMBINEDMODELS model</span> ──</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Initializing a population of 20 solutions.</span>
<span class="co">#&gt; ℹ Generation 1 : best solution with an ICL of -74256 and 10 clusters.</span>
<span class="co">#&gt; ℹ Generation 2 : best solution with an ICL of -74043 and 12 clusters.</span>
<span class="co">#&gt; ℹ Generation 3 : best solution with an ICL of -73902 and 9 clusters.</span>
<span class="co">#&gt; ℹ Generation 4 : best solution with an ICL of -73875 and 8 clusters.</span>
<span class="co">#&gt; ℹ Generation 5 : best solution with an ICL of -73840 and 7 clusters.</span>
<span class="co">#&gt; ℹ Generation 6 : best solution with an ICL of -73840 and 7 clusters.</span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Final clustering</span> ──</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Clustering with a COMBINEDMODELS model 7 clusters and an ICL of -73840</span></code></pre></div>
<p>When the model is fitted the <code><a href="../reference/extractSubModel.html">extractSubModel()</a></code> function allow to retrieve the fitted sub-models, and use the plotting capabilities of each of them. We may for example look at the categorical part of the model and make a <code>marginals</code> plot. We see with this figure that the clusters found agree quite strongly with the field positions features. The preferred foot feature has also an impact on cluster 2 and 3.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/extractSubModel.html">extractSubModel</a></span><span class="op">(</span><span class="va">sol</span>,<span class="st">"categorical"</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"marginals"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/genplotcat-1.png" alt="Marginal plots of the Lca part of the model over categorical features." width="100%"><p class="caption">
Marginal plots of the Lca part of the model over categorical features.
</p>
</div>
<p>When looking at the continuous features the clusters are quite well organized, the hierarchical ordering has produced a meaningful ordering, look at the shooting feature. We will go back to this point later.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/extractSubModel.html">extractSubModel</a></span><span class="op">(</span><span class="va">sol</span>,<span class="st">"cont"</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"violins"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/genplotviol-1.png" alt="Violins plots of the Gmm part of the model over continuous features." width="100%"><p class="caption">
Violins plots of the Gmm part of the model over continuous features.
</p>
</div>
<p>For the marginals plots, one things that pop out is the clear bimodal aspect of the defending features, the mixture of the remaining feature is clearly not so well separated.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/extractSubModel.html">extractSubModel</a></span><span class="op">(</span><span class="va">sol</span>,<span class="st">"cont"</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"marginals"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/genplotmar-1.png" alt="Marginal plots of the Gmm part of the model over continuous features." width="100%"><p class="caption">
Marginal plots of the Gmm part of the model over continuous features.
</p>
</div>
<p>To clearly show, the alignment of the cluster with field position we will make a little figure and plot for each cluster their mean position on the field. This will be computed as the weighted average coordinate of each field position were the weight correspond to the probability that a cluster member can play at this position.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">clust_positions</span> <span class="op">=</span> <span class="va">Fifa</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">value_eur</span><span class="op">&gt;</span><span class="fl">1000000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pos_x</span>,<span class="va">pos_y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cluster<span class="op">=</span><span class="fu"><a href="../reference/clustering.html">clustering</a></span><span class="op">(</span><span class="va">sol</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cluster</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>pos_x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">pos_x</span><span class="op">)</span>,pos_y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">pos_y</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">clust_positions</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://torvaney.github.io/ggsoccer/reference/annotate_pitch.html" class="external-link">annotate_pitch</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">pos_x</span>,y<span class="op">=</span><span class="va">pos_y</span>,label<span class="op">=</span><span class="va">cluster</span><span class="op">)</span>,size<span class="op">=</span><span class="fl">5</span>,col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://torvaney.github.io/ggsoccer/reference/theme_pitch.html" class="external-link">theme_pitch</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/posplot-1.png" alt="Field position map of the clusters." width="90%"><p class="caption">
Field position map of the clusters.
</p>
</div>
<p>The organization of the clusters clearly appears, cluster 7 correspond to central defensive players, cluster 5 and 6 to lateral defensive players (recall that the preferred foot of these player were quite different between this two clusters with almost only right footed players in cluster 6 and left footed players in cluster 5).</p>
</div>
<div class="section level3">
<h3 id="sbm-lca-the-ndrangheta-data-set">Sbm + Lca, the Ndrangheta data-set<a class="anchor" aria-label="anchor" href="#sbm-lca-the-ndrangheta-data-set"></a>
</h3>
<p>Combined models may also be used to analyze graph datasets with node attribute for example. To demonstrate this feature we will use the Ndrangheta dataset. This dataset contains relationship information between members of the Ndrangheta mafia together with some information on their group affiliation and their role. We will use an Sbm model to fit the adjacency matrix and an Lca model for the factor describing the roles.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># laod the dataset</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Ndrangheta</span><span class="op">)</span>
<span class="co"># prepare the data </span>
<span class="va">data</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>graph<span class="op">=</span><span class="va">Ndrangheta</span><span class="op">$</span><span class="va">X</span>,node_infos<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Role<span class="op">=</span><span class="va">Ndrangheta</span><span class="op">$</span><span class="va">node_meta</span><span class="op">$</span><span class="va">Role</span>,stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co"># build the combined model</span>
<span class="va">mixmod</span> <span class="op">=</span> <span class="fu"><a href="../reference/CombinedModels.html">CombinedModels</a></span><span class="op">(</span>models<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>graph<span class="op">=</span><span class="fu"><a href="../reference/Sbm.html">SbmPrior</a></span><span class="op">(</span><span class="op">)</span>,node_infos<span class="op">=</span><span class="fu"><a href="../reference/Lca.html">LcaPrior</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># cluster</span>
<span class="va">sol</span><span class="op">=</span><span class="fu"><a href="../reference/greed.html">greed</a></span><span class="op">(</span><span class="va">data</span>,model<span class="op">=</span><span class="va">mixmod</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Fitting a COMBINEDMODELS model</span> ──</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Initializing a population of 20 solutions.</span>
<span class="co">#&gt; ℹ Generation 1 : best solution with an ICL of -2567 and 18 clusters.</span>
<span class="co">#&gt; ℹ Generation 2 : best solution with an ICL of -2423 and 19 clusters.</span>
<span class="co">#&gt; ℹ Generation 3 : best solution with an ICL of -2403 and 21 clusters.</span>
<span class="co">#&gt; ℹ Generation 4 : best solution with an ICL of -2403 and 21 clusters.</span>
<span class="co">#&gt; ℹ Generation 5 : best solution with an ICL of -2403 and 21 clusters.</span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Final clustering</span> ──</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Clustering with a COMBINEDMODELS model 20 clusters and an ICL of -2381</span>
<span class="co"># analyze the results</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sol</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/unnamed-chunk-3-1.png" alt="Ndrangheta dataset dendogram with Sbm + Lca." width="90%"><p class="caption">
Ndrangheta dataset dendogram with Sbm + Lca.
</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/extractSubModel.html">extractSubModel</a></span><span class="op">(</span><span class="va">sol</span>,<span class="st">"graph"</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"blocks"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/unnamed-chunk-4-1.png" alt="Adjacency matrix block diagram representation of the Sbm part of the model fited on the Ndrangheta dataset." width="100%"><p class="caption">
Adjacency matrix block diagram representation of the Sbm part of the model fited on the Ndrangheta dataset.
</p>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/extractSubModel.html">extractSubModel</a></span><span class="op">(</span><span class="va">sol</span>,<span class="st">"node_infos"</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"marginals"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="CombinedModels_files/figure-html/unnamed-chunk-5-1.png" alt="Marginal plots of the Lca part of the model fited on the Ndrangheta dataset." width="700"><p class="caption">
Marginal plots of the Lca part of the model fited on the Ndrangheta dataset.
</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Etienne Côme, Nicolas Jouvin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
